(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{288:function(e,t,n){},294:function(e,t,n){"use strict";n.r(t);var r=n(40),a=n(52),c=n(24),s=n(0),i=n(32),o=n(7),l=function(e){var t=e.children,n=Object(i.c)((function(e){return e.auth})),r=Object(c.f)();return n?t:Object(o.jsx)(c.a,{to:"/login",state:{from:r,loginMessage:"You have to be logged in!"}})},u=function(e){var t=e.children,n=Object(i.c)((function(e){return e.auth})),r=Object(c.f)();return n?Object(o.jsx)(c.a,{to:"/",state:{from:r}}):t},d=n(299),j=n(183),b=(n(97),n(98),n(2)),h=n(3),m=n(5),O=n(301),p=n(182),f=n(68),g=n(27),x=n(33),v=n(176),y=n.n(v).a.create({baseURL:"/api/"});y.interceptors.request.use((function(e){return localStorage.getItem("usId")&&e.headers&&(e.headers.authorization="Bearer ".concat(JSON.parse(localStorage.getItem("usId")).token)),e}));var N,I,k,w=function(e){return y.post("/user/signin",e)},S=n(140),C=n(93),E=new C.GraphQLClient("https://simplicityhw.cotunnel.com/graphql"),L=function(){var e=Object(x.a)(Object(g.a)().mark((function e(t){var n,r,a;return Object(g.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={authorization:" Bearer ".concat(t," ")},r=Object(C.gql)(N||(N=Object(S.a)(["\n        {\n          restaurants(\n            delivery: false\n            index: 1\n            limit: 100\n          ) {\n            name\n            open\n            types {\n              name\n            }\n          \n          }\n        }\n        \n          "]))),e.next=5,E.request(r,null,n);case 5:return a=e.sent,e.abrupt("return",a);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(x.a)(Object(g.a)().mark((function e(t){var n,r,a;return Object(g.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={authorization:" Bearer ".concat(t," ")},r=Object(C.gql)(I||(I=Object(S.a)(["\n      {\n        pastOrders(limit: 100, index: 1) {\n          address {\n            addressLine1\n          }\n          orderDate\n          restaurant {\n            name\n          }\n          total\n      \n        }\n      }\n        "]))),e.next=5,E.request(r,null,n);case 5:return a=e.sent,e.abrupt("return",a);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(x.a)(Object(g.a)().mark((function e(t){var n,r,a;return Object(g.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={authorization:" Bearer ".concat(t," ")},r=Object(C.gql)(k||(k=Object(S.a)(["\n    {\n      user {\n        addresses {\n          addressIconId\n          addressLine1\n          addressLine2\n          adminWard\n    \n          default\n          flatNumber\n          fullName\n          geoEnabled\n          id\n          lat\n          lon\n          postalCode\n          slugAdminWard\n          tips\n          title\n        }\n        createdAt\n        email\n        emailVerified\n        firstName\n        lastName\n        mobileNumber\n        smsVerified\n      }\n    }\n    \n        "]))),e.next=5,E.request(r,null,n);case 5:return a=e.sent,e.abrupt("return",a);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),T="SIGN_IN",z="SIGN_OUT",q="GET_USER_RESTAURANTS",B="GET_PAST_ORDERS",W="GET_USER_INFO",D=function(){var e=Object(s.useState)({firstName:"",lastName:"",email:"",phone:"",password:""}),t=Object(m.a)(e,2),n=t[0],r=t[1],a=Object(i.b)(),l=Object(c.g)(),u=function(e){return r(Object(h.a)(Object(h.a)({},n),{},Object(b.a)({},e.target.name,e.target.value)))};return Object(o.jsxs)("div",{className:"login-form-container",children:[Object(o.jsx)("div",{className:"login-form-logo-container",children:Object(o.jsx)("img",{className:"login-form-logo",src:"/simpliicon.png",alt:""})}),Object(o.jsx)("div",{className:"login-form-welcome",children:"Welcome"}),Object(o.jsx)("div",{className:"login-form-message",children:"Log in and order from best restaurants"}),Object(o.jsxs)(O.a,{onFinish:function(e){var t,r;a((t=n,r=l,function(){var e=Object(x.a)(Object(g.a)().mark((function e(n){var a,c;return Object(g.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w(t);case 3:a=e.sent,c=a.data,n({type:"SIGN_IN",payload:c}),localStorage.setItem("usId",JSON.stringify(Object(h.a)({},c))),r("/"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()))},name:"register",scrollToFirstError:!0,children:[Object(o.jsx)(O.a.Item,{name:"email",rules:[{type:"email",message:"This is not a valid email."},{required:!0,message:"Email is required."}],children:Object(o.jsx)(p.a,{className:"login-form-input",name:"email",placeholder:"Email",onChange:u})}),Object(o.jsx)(O.a.Item,{name:"password",rules:[{required:!0,message:"Please input your password!"}],hasFeedback:!0,children:Object(o.jsx)(p.a.Password,{className:"login-form-input",name:"password",placeholder:"Password",onChange:u})}),Object(o.jsx)(O.a.Item,{children:Object(o.jsx)(f.a,{type:"primary",className:"login-form-button",htmlType:"submit",children:"Let's go"})})]})]})},V=function(e){var t=Object(c.f)(),n=(d.a.Header,d.a.Content,d.a.Footer,d.a.Sider);return t.state&&j.b.error(t.state.loginMessage),Object(o.jsxs)(d.a,{style:{height:"100vh",backgroundColor:"white"},children:[Object(o.jsx)(n,{className:"login-sider",width:"40%",breakpoint:"xs",collapsedWidth:0,zeroWidthTriggerStyle:{display:"none"},children:Object(o.jsx)("div",{className:"login-logo",children:Object(o.jsx)("img",{className:"login-logo-icon",src:"./simplilogo.png",alt:""})})}),Object(o.jsx)(d.a,{className:"login-layout",children:Object(o.jsx)(D,{})})]})},_=n(133),F=n(134),G=n(302),M=n(306),P=(n(288),function(e){var t=d.a.Header,n=Object(c.g)(),r=Object(i.b)(),a=Object(o.jsxs)(_.a,{mode:"horizontal",style:{backgroundColor:"#eee",marginLeft:20},children:[Object(o.jsx)(_.a.Item,{onClick:function(){n("/my-account")},children:"My account"}),Object(o.jsx)(_.a.Item,{onClick:function(){var e;r((e=n,function(){var t=Object(x.a)(Object(g.a)().mark((function t(n){return Object(g.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n({type:"SIGN_OUT"}),localStorage.removeItem("usId"),e("/login")}catch(r){console.log(r)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))},children:"Log out"})]});return Object(o.jsxs)(t,{className:"header",style:{backgroundColor:"white",display:"flex"},children:[Object(o.jsx)("div",{children:Object(o.jsx)("div",{onClick:function(){n("/")},style:{cursor:"pointer"},children:Object(o.jsx)("img",{src:"/simplilogo.png"})})}),Object(o.jsx)("div",{style:{marginLeft:"auto"},children:Object(o.jsx)("div",{className:"header-avatar-container",children:Object(o.jsx)(F.a,{overlay:a,placement:"topRight",arrow:!0,children:Object(o.jsx)(G.a,{className:"header-avatar-icon",icon:Object(o.jsx)(M.a,{})})})})})]})}),U=function(e){Object(c.f)();var t=Object(c.g)(),n=d.a.Content;return Object(o.jsxs)(d.a,{className:"layout",style:{height:"100vh"},children:[Object(o.jsx)(P,{}),Object(o.jsx)(n,{style:{margin:"20px",padding:"50px",backgroundColor:"white"},children:Object(o.jsxs)("div",{style:{margin:"auto",textAlign:"center"},children:[Object(o.jsx)(f.a,{onClick:function(){t("/restaurants")},type:"primary",style:{height:"20vh",minWidth:"60%",margin:10,fontSize:"1.5em",borderRadius:10,backgroundColor:"rgb(19, 19, 211)"},children:"Restaurants"}),Object(o.jsx)(f.a,{onClick:function(){t("/past-orders")},type:"primary",style:{height:"20vh",minWidth:"60%",margin:10,fontSize:"1.5em",borderRadius:10,backgroundColor:"rgb(19, 19, 211)"},children:"Past Orders"}),Object(o.jsx)(f.a,{onClick:function(){t("/my-account")},type:"primary",style:{height:"20vh",minWidth:"60%",margin:10,fontSize:"1.5em",borderRadius:10,backgroundColor:"rgb(19, 19, 211)"},children:"My Account"})]})})]})},J=n(46),H=n(300),Q=function(e){Object(c.f)();var t=Object(i.b)(),n=Object(s.useState)([]),r=Object(m.a)(n,2),a=r[0],l=r[1],u=Object(i.c)((function(e){return e.auth})),j=Object(i.c)((function(e){return e.pastOrders}));Object(s.useEffect)((function(){var e;t((e=u.token,function(){var t=Object(x.a)(Object(g.a)().mark((function t(n){var r;return Object(g.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R(e);case 3:r=t.sent,n({type:B,payload:r.pastOrders}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()))}),[t]),Object(s.useEffect)((function(){var e=[];if(j.length>0){var t,n=1,r=Object(J.a)(j);try{for(r.s();!(t=r.n()).done;){var a=t.value,c={key:n,address:a.address.addressLine1,date:a.orderDate,name:a.restaurant.name,total:a.total};e.push(c),n++}}catch(s){r.e(s)}finally{r.f()}}l(e)}),[j]);d.a.Header;var b=d.a.Content;d.a.Footer;return Object(o.jsxs)(d.a,{className:"layout",style:{height:"100vh"},children:[Object(o.jsx)(P,{}),Object(o.jsxs)(b,{style:{margin:"20px",marginBottom:0,padding:"30px",paddingBottom:0,backgroundColor:"white"},children:[Object(o.jsx)("div",{style:{fontSize:"2em",fontWeight:600,color:"rgb(19, 19, 211)",marginLeft:10},children:"Past Orders"}),Object(o.jsx)(H.a,{columns:[{title:"Address",dataIndex:"address",sorter:function(e,t){return e.name.length-t.name.length},sortDirections:["descend"]},{title:"Date",dataIndex:"date",sorter:function(e,t){return e.name.length-t.name.length},sortDirections:["ascend","descend"]},{title:"Restaurant",dataIndex:"name",sorter:function(e,t){return e.name.length-t.name.length},sortDirections:["ascend","descend"]},{title:"Total Amount",dataIndex:"total",sorter:function(e,t){return e.total-t.total},sortDirections:["ascend","descend"]}],dataSource:a,loading:!(j.length>0)})]})]})},Y=n(303),K=n(305),X=function(e){Object(c.f)();var t=Object(i.b)(),n=Object(s.useState)([]),r=Object(m.a)(n,2),a=r[0],l=r[1],u=Object(i.c)((function(e){return e.auth})),j=Object(i.c)((function(e){return e.restaurants}));Object(s.useEffect)((function(){var e;t((e=u.token,function(){var t=Object(x.a)(Object(g.a)().mark((function t(n){var r;return Object(g.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,L(e);case 3:r=t.sent,n({type:q,payload:r.restaurants}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()))}),[t]),Object(s.useEffect)((function(){var e=[];if(j.length>0){var t,n=1,r=Object(J.a)(j);try{for(r.s();!(t=r.n()).done;){var a,c=t.value,s=[],i=Object(J.a)(c.types);try{for(i.s();!(a=i.n()).done;){var o=a.value;s.push(o.name)}}catch(d){i.e(d)}finally{i.f()}var u={key:n,name:c.name,status:c.open?"Open":"Closed",cuisines:s};e.push(u),n++}}catch(d){r.e(d)}finally{r.f()}}l(e)}),[j]);d.a.Header;var b=d.a.Content,h=(d.a.Footer,[{title:"Name",dataIndex:"name",sorter:function(e,t){return e.name.length-t.name.length},sortDirections:["ascend","descend"]},{title:"Status",key:"state",dataIndex:"status",filters:[{text:"Open",value:"Open"},{text:"Closed",value:"Closed"}],render:function(e){return Object(o.jsxs)("span",{children:[Object(o.jsx)(Y.a,{status:"Open"===e?"success":"error"}),e]})},onFilter:function(e,t){return t.status==e}},{title:"Cuisines",key:"types",dataIndex:"cuisines",render:function(e){return Object(o.jsx)("span",{children:e.map((function(e){return Object(o.jsx)(K.a,{children:e.toUpperCase()},e)}))})}}]);return Object(o.jsxs)(d.a,{className:"layout",style:{height:"100vh"},children:[Object(o.jsx)(P,{}),Object(o.jsxs)(b,{style:{margin:"20px",marginBottom:0,padding:"30px",paddingBottom:0,backgroundColor:"white"},children:[Object(o.jsx)("div",{style:{fontSize:"2em",fontWeight:600,color:"rgb(19, 19, 211)",marginLeft:10},children:"All Restaurants"}),Object(o.jsx)(H.a,{columns:h,dataSource:a,pagination:!1,loading:!(j.length>0)})]})]})},Z=n(304),$=function(e){var t=d.a.Content,n=(Object(c.f)(),Object(i.b)()),r=Object(i.c)((function(e){return e.auth})),a=Object(i.c)((function(e){return e.userInfo}));return Object(s.useEffect)((function(){var e;n((e=r.token,function(){var t=Object(x.a)(Object(g.a)().mark((function t(n){var r;return Object(g.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,A(e);case 3:r=t.sent,n({type:W,payload:r.user}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()))}),[n]),null===a?Object(o.jsx)("div",{children:" Loading "}):Object(o.jsxs)(d.a,{className:"layout",style:{height:"100vh"},children:[Object(o.jsx)(P,{}),Object(o.jsxs)(t,{style:{margin:"20px",marginBottom:0,padding:"30px",paddingBottom:0,backgroundColor:"white"},children:[Object(o.jsx)("div",{style:{fontSize:"2em",fontWeight:600,color:"rgb(19, 19, 211)",marginLeft:10},children:"My Account"}),Object(o.jsxs)(Z.b,{bordered:!0,children:[Object(o.jsx)(Z.b.Item,{label:"Name",children:a.firstName}),Object(o.jsx)(Z.b.Item,{label:"Last Name",children:a.lastName}),Object(o.jsx)(Z.b.Item,{label:"Email",span:2,children:a.email}),Object(o.jsx)(Z.b.Item,{label:"Mobile Phone",span:2,children:a.mobileNumber}),Object(o.jsx)(Z.b.Item,{label:"Membership Date",span:2,children:a.createdAt}),Object(o.jsx)(Z.b.Item,{label:"Email Verification",children:a.emailVerified?"Verified":"Not Verified"}),Object(o.jsx)(Z.b.Item,{label:"SMS Verification",children:a.smsVerified?"Verified":"Not Verified"}),a.addresses.map((function(e){return Object(o.jsxs)(Z.b.Item,{label:"Address",children:[e.addressLine1,Object(o.jsx)("br",{}),e.addressLine2,Object(o.jsx)("br",{}),e.flatNumber,Object(o.jsx)("br",{}),e.postalCode,Object(o.jsx)("br",{})]},e.id)}))]})]})]})},ee=n(96),te=n(181),ne=Object(ee.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:JSON.parse(localStorage.getItem("usId")),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return t.payload;case z:return null;default:return e}},restaurants:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===q?t.payload:e},pastOrders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===B?t.payload:e},userInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return t.type===W?t.payload:e}}),re=Object(ee.d)(ne,Object(ee.c)(Object(ee.a)(te.a))),ae=document.getElementById("root");Object(r.render)(Object(o.jsx)(i.a,{store:re,children:Object(o.jsx)(a.a,{children:Object(o.jsxs)(c.d,{children:[Object(o.jsx)(c.b,{path:"/",element:Object(o.jsxs)(l,{children:["  ",Object(o.jsx)(U,{})," "]})}),Object(o.jsx)(c.b,{path:"/past-orders",element:Object(o.jsxs)(l,{children:["  ",Object(o.jsx)(Q,{})," "]})}),Object(o.jsx)(c.b,{path:"/restaurants",element:Object(o.jsxs)(l,{children:["  ",Object(o.jsx)(X,{})," "]})}),Object(o.jsx)(c.b,{path:"/my-account",element:Object(o.jsxs)(l,{children:["  ",Object(o.jsx)($,{})," "]})}),Object(o.jsx)(c.b,{path:"/login",element:Object(o.jsxs)(u,{children:[" ",Object(o.jsx)(V,{})," "]})}),Object(o.jsx)(c.b,{path:"*",element:Object(o.jsx)("div",{children:Object(o.jsx)("h1",{children:"404"})})})]})})}),ae)},98:function(e,t,n){}},[[294,1,2]]]);
//# sourceMappingURL=main.00618740.chunk.js.map